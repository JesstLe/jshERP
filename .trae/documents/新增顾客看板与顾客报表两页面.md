## 目标页面（对标你给的竞品图）
实现 2 个新页面：
- **顾客看板**：顶部 KPI（收入总额/消费人数/会员总数/储值余额）+ 2~4 个图表（消费类型占比、营业额趋势、挂账趋势/商品占比）+ 最近新增会员列表 + 右侧“快捷入口”区
- **顾客报表**：按日期/门店/会员筛选的明细表（消费流水、挂账流水），并提供快捷跳转到现有“会员信息”等页面

## 数据口径与可实现范围（基于现有库表）
- **会员总数**：`jsh_supplier` 里 `type='会员'` 且未删除/启用
- **储值余额**：`jsh_supplier.advance_in` 汇总（当前余额快照）
- **消费人数**：`jsh_cashier_session` 在选定周期内 `status=CLOSED` 且 `member_id is not null` 的去重人数
- **收入总额**：选定周期内会话商品明细 `jsh_cashier_session_product_item.amount` + 服务明细 `jsh_service_order_item.amount` 汇总
- **消费类型占比**：同上两张明细表汇总出 服务/商品 占比
- **营业额趋势**：按日/按月 group by 会话 `end_time` 生成折线图
- 竞品图里的“现金/微信/支付宝/银行卡拆分”“卡类分布/次卡次数”等：当前库里缺少支付方式流水/会员卡类型表，先做成后续增强项

## 必要后端改造
### 1）补齐“会员注册时间”字段（让你能做“最近新增会员列表/新增会员数”）
- 给 `jsh_supplier` 增加 `create_time` 字段（默认当前时间），并提供升级 SQL（对已有库安全执行）
- 同步更新 Supplier 实体与 MyBatis 映射（ResultMap、ColumnList、insertSelective）
- 新增会员时若 `create_time` 为空则写入当前时间

### 2）新增顾客看板统计接口（新 Controller + MapperEx）
新增 `/customer/dashboard/**`：
- `GET /customer/dashboard/summary?range=today|month|custom&start=&end=&depotId=`：返回 4 个 KPI
- `GET /customer/dashboard/revenueTrend?...`：返回趋势折线
- `GET /customer/dashboard/consumeTypeRatio?...`：返回饼图数据（服务/商品）
- `GET /customer/dashboard/recentMembers?limit=`：返回最近新增会员列表
实现方式：写 1 个 `CustomerDashboardMapperEx.xml`，在 SQL 层完成聚合（group by / sum / count distinct），避免 Java 层大循环。

## 前端实现（复用现有仪表盘/图表体系）
- 不引入 echarts：项目当前用的是 `viser-vue/@antv` 图表组件，直接复用 [Analysis.vue](file:///Users/lv/Workspace/erp/jshERP-web/src/views/dashboard/Analysis.vue) / [IndexChart.vue](file:///Users/lv/Workspace/erp/jshERP-web/src/views/dashboard/IndexChart.vue) 的卡片与图表布局。
- 新增页面：
  - `src/views/customer/CustomerDashboard.vue`（对标竞品看板布局）
  - `src/views/customer/CustomerReports.vue`（报表入口 + 两个明细 Tab：消费/挂账）
- 报表页内明细表：
  - 消费明细：基于会话 end_time + 服务/商品金额聚合成每单金额
  - 挂账明细：基于 `jsh_credit_bill` 列表

## 菜单/路由接入
- 按你们当前机制（后端下发菜单树 → 前端动态路由），提供一份升级 SQL 往 `jsh_function` 增加：
  - “顾客管理”父菜单
  - “顾客看板”“顾客报表”两个子菜单（component 指向新增 Vue 文件路径）
- 同步更新初始化 SQL（便于新环境一键安装可见）。

## 验证方式
- 后端：用接口调用验证 KPI/图表返回值与 SQL 口径一致
- 前端：看板加载正常、切换时间范围会刷新、报表筛选后能出列表、菜单可进入页面

## 交付物
- 2 个新页面 + 统计接口 + DB 升级脚本 + 菜单初始化/升级脚本
- 同时明确标注哪些竞品指标需要新增“支付方式流水/会员卡类型/充值流水”表后才能做到 100% 复刻