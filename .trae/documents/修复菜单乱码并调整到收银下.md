## 现象与原因定位
- 侧边栏的“顾客看板/顾客报表”显示成 `é...` 这类乱码，是典型的 **UTF-8 文本被按 latin1(ISO-8859-1) 解释后再存入 utf8 字段** 造成的“乱码回写”。
- 项目里 `jsh_function.name` 字段本身是 `utf8`（见 [jsh_erp.sql](file:///Users/lv/Workspace/erp/jshERP-boot/docs/jsh_erp.sql#L217-L234)），所以不是表结构问题，问题出在 **执行升级 SQL 时 MySQL 客户端/连接字符集不是 UTF-8**，导致插入时发生了错误转换。

## 修复方案（保证现在修好 + 以后不再出现）
### 1）修复现有两条菜单记录的乱码
- 针对 `url in ('/customer/dashboard','/customer/report')`：
  - 直接 `UPDATE jsh_function SET name='顾客看板' ...`、`name='顾客报表' ...`（最稳、影响最小）
  - 同时校正 `number/parent_number/sort`（见下面第2点），避免只修文字但菜单位置不对。

### 2）把入口移动到“收银”下面（按你图二）
- 将两条记录从 `parent_number='0102'(基础资料)` 移到 `parent_number='0900'(收银)`
- 为了保持编号规范：
  - 顾客看板：`number='090003'`，`sort='0103'`
  - 顾客报表：`number='090004'`，`sort='0104'`
- 这样在左侧菜单“收银”展开后，会在“前台收银/服务项目管理”下面看到这两个入口。

### 3）从根上避免再次乱码
- 在升级脚本开头增加：`SET NAMES utf8mb4;`（或等价设置），确保 mysql 客户端以 UTF-8 发送 SQL。
- 同时建议在执行升级命令时加：`mysql --default-character-set=utf8mb4 ...`（双保险）。

## 需要修改的文件（我会按下面改）
- 更新初始化库：
  - [jsh_erp.sql](file:///Users/lv/Workspace/erp/jshERP-boot/docs/jsh_erp.sql)
    - 把两条 INSERT 的 `parent_number/number/sort` 改为挂在收银下
- 更新升级脚本：
  - [upgrade_customer_dashboard_menu.sql](file:///Users/lv/Workspace/erp/jshERP-boot/docs/upgrade_customer_dashboard_menu.sql)
    - 顶部加 `SET NAMES utf8mb4;`
    - 改为“若存在则 UPDATE 修复乱码 + 调整到收银下；若不存在则 INSERT 并保证 UTF-8”

## 验证方式
- 后端：调用 `POST /function/findMenuByPNumber`（带 userId）确认菜单树中：
  - `顾客看板/顾客报表` 文本正常
  - 出现在“收银”节点 children 下
- 前端：刷新后侧边栏位置与文字正常，点击可进入新页面。

确认后我会开始落地修改脚本并在本地环境跑一次升级与接口验证。