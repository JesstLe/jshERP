## 需求澄清（按你补充的业务模型）
- 一个客户 = 一个公司（建议对应一个租户 tenant）。
- 客户先有一个权限很高的主账号（租户管理员/老板账号）。
- 主账号可以创建多个子账号；每个子账号代表一个“子门店”，独立账号密码独立登录。
- 子门店需要：每天单独记录自己的消费/账单（按门店维度统计/查询）。
- 所有门店需要：共用同一套会员信息（会员跨门店可消费）。

## 现状结论（基于当前代码）
### 1）门店模型：已经具备雏形
- 你现在看到的“仓库1/2/3”其实就是 `jsh_depot` 初始化的门店/仓库列表（见 [jsh_erp.sql](file:///Users/lv/Workspace/erp/jshERP-boot/docs/jsh_erp.sql#L125-L127)）。
- 前台收银选择“门店”走的是 `/depot/findDepotByCurrentUser`（见 [DepotController.findDepotByCurrentUser](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/java/com/jsh/erp/controller/DepotController.java#L206-L220)），本质就是“当前用户可用的 depot 列表”。
- 这意味着：**把 depot 当门店用**是可行的，并且**子账号可以通过 depot 权限被限制只能选自己的门店**（用户-仓库权限 `findUserDepot` 已存在，见 [DepotController.findUserDepot](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/java/com/jsh/erp/controller/DepotController.java#L159-L199)）。

### 2）门店账单/消费记录：收银侧已经有门店维度
- 收银会话 `CashierSession` 有 `depotId` 字段（见 [CashierSession.java](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/java/com/jsh/erp/datasource/entities/CashierSession.java#L8-L25)），开台时由前端传入并写入。
- 交班/日结统计在后端已按 depotId 汇总（见 [CashierShiftService.handover](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/java/com/jsh/erp/service/cashier/CashierShiftService.java#L53-L87)）。
- 因此“子门店每天单独记录自己的消费”可以落在：
  - 只允许子账号访问自己 depot 的会话/座席/交班统计
  - 报表/单据查询按 depotId 过滤

### 3）会员互通：当前是“天然互通”，但存在租户隔离缺口
- 会员复用 `jsh_supplier`（type=会员），数据模型没有门店字段，因此 **不会按门店分割**（天然互通）。
- 但目前会员查询/列表 SQL 没有按 `tenant_id` 过滤（见 [SupplierMapperEx.xml](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/resources/mapper_xml/SupplierMapperEx.xml#L4-L36)、[SupplierMapperEx.xml](file:///Users/lv/Workspace/erp/jshERP-boot/src/main/resources/mapper_xml/SupplierMapperEx.xml#L86-L98)），在多租户下会有跨公司可见风险，需要补齐。

## 新计划（你确认后我执行）
### A. “仓库1/2/3”改名为“门店1/2/3”
1. 新增一个升级 SQL（可重复执行）
   - 精准把 `jsh_depot.name` 的 仓库1/2/3 更新为 门店1/2/3。
2. 修改初始化 SQL
   - 把 [jsh_erp.sql](file:///Users/lv/Workspace/erp/jshERP-boot/docs/jsh_erp.sql#L125-L127) 默认名称改为 门店1/2/3。
3. 前端主要文案统一（只改展示文案）
   - 在 depot 管理/用户分配仓库权限/系统配置等页面，把“仓库”显示改为“门店”，不动接口字段与变量名，避免回归风险。

### B. 子账号=子门店：用“用户-门店权限”把数据隔离到门店维度
1. 保持“一个客户=一个 tenant”，门店用 depot 承载
2. 子账号的门店限制
   - 复用现有“分配仓库权限”（即分配门店权限）能力：
     - 子账号只分配自己门店的 depotId
     - 前台收银的门店下拉天然只会返回该 depotId
3. 收银/座席/交班按门店隔离
   - 确认并补齐以下接口/查询都必须满足“只能访问自己门店的数据”（按 depotId 或当前用户可用 depotId 列表过滤）：
     - 座席列表 `/seat/list`（目前前端传 depotId，后端按 depotId 查询，继续保持）
     - 会话创建 `/cashier/session/open`（当前传 depotId，后端写入 session）
     - 交班统计 `/cashier/shift/*`（已按 depotId 汇总）
   - 若发现有接口只按 sessionId 不校验 depotId/tenantId，将补上校验。

### C. 会员多店互通（共享）+ 多租户隔离（安全）
1. 会员仍然不加门店过滤，保持同租户全店共享
2. 在会员相关查询统一加 tenantId 过滤
   - 修改 SupplierController 的 list/下拉相关入口统一解析 tenantId
   - 修改 SupplierService/SupplierMapperEx.xml 在查询条件里加 `tenant_id = #{tenantId}`
   - 保证：
     - 同租户：会员跨门店互通
     - 不同租户：互不可见

### D. 验证
- 使用主账号创建门店1/2/3 + 创建子账号A/B/C，并分别只分配门店1/2/3权限。
- 在门店1用子账号A新增会员 → 门店2/3用子账号B/C能搜索并绑定消费。
- 子账号A只能看到/操作门店1的座席/会话/交班数据。

如果你确认，我会按 A→B→C→D 依次落地，并在最终给你一份“如何给客户开通主账号+分店子账号”的操作说明（含权限分配点）。